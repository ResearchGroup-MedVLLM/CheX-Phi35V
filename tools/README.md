
# Data Sampling Process

This repository contains scripts for feature extraction and data sampling. The process is divided into four steps, which should be executed sequentially:

---


### Steps Overview:
1. **step1_get_image_feature.py**  
   Extracts image features from the dataset (separately to avoid image missing).
   
2. **step2_get_text_feature_matrix.py**  
   Extracts all features from the text, including question and explanation (rationale) as a combined `h5`.

3. **step3_merge_image_feature_matrix.py**  
   Merges the image and text feature matrices for further processing.

4. **step4_combine_similarity.py**  
   Combines the image and text features to perform similarity retrieval.

### Query Generation:
The query for retrieval is generated by `stage3_evaluate_mimic_ext_vqa.sh`, which performs token-level probability calculation. The accuracy (`acc`) is determined by comparing the prediction results, based on the token-level probabilities generated during the evaluation phase.

---

### Region Mark Generation
Coming soon